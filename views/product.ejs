<%- include('./partials/header') %>
<%- include('./partials/navbar') %>
<main class="w-screen lg:bg-white max-w-[1920px] m-auto">

  <section class="product-container px-[20px] md:px-[10px] lg:px-[190px] xl:px-[150px] m-auto flex justify-center items-center w-full min-h-[740px] bg-[#FFF9F4] ">

    <div class="product  flex flex-col lg:flex-row lg:items-stretch justify-between items-start gap-[100px] max-w-[1142px] w-[100%] ">

      <div class="product-images w-1/2 relative overflow-hidden">

        <div class="slider-wrapper relative w-full h-full">

          <% if(product.images.length > 0){ %>
          <% product.images.forEach((image, index) => { %>
          <img src="/images/product/<%= image %>" alt="<%= product.name %>" class="slider-image absolute top-0 left-0 w-full h-full object-contain transition-opacity duration-500 ease-in-out <%= index === 0 ? 'opacity-100' : 'opacity-0' %>" data-index="<%= index %>">
          <% }) %>
          <% }else{ %>
          <img src="/images/product/default.jpg" alt="<%= product.name %>" class="w-full h-full object-contain opacity-100">
          <% } %>

        </div>

        <% if(product.images.length > 0){ %>
        <button class="slider-prev absolute left-0 top-1/2 transform border-[1px] border-black -translate-y-1/2 bg-white text-black px-2 py-1 rounded-full"><i class="ri-arrow-left-wide-line font-bold"></i></button>

        <button class="slider-next absolute right-0 top-1/2 transform border-[1px] border-black -translate-y-1/2 bg-white text-black px-2 py-1 rounded-full"><i class="ri-arrow-right-wide-line font-bold"></i></button>

        <% } %>

      </div>

      <div class="product-details w-1/2 ">

        <div class="product-name min-h-[104px] border-b-[2px] border-[#E2E2E2] flex items-center font-normal py-4">
          <h2 class="text-[#191717] font-[merriweather] text-[24px] font-bold"><%= product.name %></h2>
        </div>

        <div class="product-price h-[104px] text-[24px] flex items-center gap-[20px] font-light">
          <% if(product.discountedPrice > 0){ %>
          <strike class="product-old-price text-[#ACACAC] font-[merriweather] ">&#8377 <%= product.price %></strike>
          <p class="product-new-price bg-transparent text-[#191717] font-[merriweather] ">&#8377 <%= product.discountedPrice %></p>
          <% }else{ %>
          <p class="product-new-price bg-transparent text-[#191717] font-[merriweather] ">&#8377 <%= product.price %></p>
          <% } %>
        </div>

        <div class="product-desc text-[16px] text-[#616161]">
          <% if(product.description.length > 0){ %>
          <% product.description.forEach((desc)=>{ %>
          <li><%= desc %></li>
          <% }) %>
          <% } %>
        </div>

        <div class="single-product-btn-control flex justify-between items-center  ">

          <div class="product-quantity flex gap-1 items-center bg-white rounded-full px-4 ">
            <i class="sub ri-subtract-line text-[16px] cursor-pointer" id="decrease-quantity"></i>
            <input type="text" name="quantity" id="quantity" class="text-[#616161] w-[50px] outline-none h-[50px] text-center" value="1" disabled>
            <i class="add ri-add-line text-[16px] cursor-pointer" id="increase-quantity"></i>
          </div>

          <div class="product-add-to-cart py-[30px]">

            <button id="single-add-to-cart-btn" class="bg-[#967BB6] text-white font-[lato] text-[16px] w-[359px] h-[48px] rounded-[58px] flex items-center gap-[20px] justify-center" data-id="<%= product._id %>">
              <p>Add to Cart</p>
              <% if(product.sale > 0){ %>
              <p class="product-new-price bg-transparent text-white ">&#8377 <%= (product.price*((100-product.sale)/100)).toFixed(2) %></p>
              <% }else{ %>
              <p class="product-new-price bg-transparent text-white ">&#8377 <%= product.price %></p>
              <% } %>
            </button>

          </div>

        </div>

      </div>

    </div>

    </div>

</main>

<%- include('./partials/footer') %>