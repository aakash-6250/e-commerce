<%- include('../partials/header') %>
<%- include('../partials/sidebar') %>

<main class="relative bg-[#F2F7FB] dark:bg-[#0F172A] w-full pb-[50px]">
    <%- include('../partials/navbar') %>


    <div class="container w-full px-6 py-8 flex flex-col gap-[30px] m-auto">
        <h1 class="font-[merriweather] text-2xl font-bold">Add Category</h1>

        <form id="edit-category-form" class="bg-white dark:bg-[#1E293B] rounded-2xl w-full min-w-[300px] p-5 flex flex-col gap-[20px] justify-center items-center">

            <div class="w-full flex flex-col gap-4">
        
                <div class="label-input w-full">
        
                    <label for="category" class="text-lg font-bold dark:text-[#94A3B8]">Category Name:</label>
        
                    <input type="text" name="category" id="category" placeholder="Category Name" required class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600" value="<%= category.name %>">
        
                </div>
            
                <div class="label-input">
        
                    <label for="subcategory-input" class="text-lg font-bold dark:text-[#94A3B8]">Subcategory:</label>
        
                    <div class="subcategory-container flex items-center w-full py-1 px-3 rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600">
        
                        <input type="text" id="subcategory-input" placeholder="Subcategory Name" class="p-2 w-full border-none bg-transparent outline-none">
        
                        <button type="button" id="add-subcategory-btn" class="ml-2 px-4 py-2 bg-blue-600 text-white rounded-full">Add</button>
                    
                    </div>
        
                    <div id="add-subcategory-tags" class="mt-2 flex flex-wrap gap-2"></div>
        
                </div>
        
                <% if(category.subcategories.length > 0){ %>
                <div class="existing-subcategory-container">
                    <h2 class="text-lg font-bold dark:text-[#94A3B8]">Existing Subcategories:</h2>
                        <div id="current-subcategory-tags" class="mt-2 flex flex-col gap-2">
                        <% category.subcategories.forEach(subcategory => { %>
                            <div class="subcategory-item px-3 py-1 bg-[#E8F5E9] text-zinc-600 rounded-full flex justify-around items-center gap-2">
                                <input type="text" id="subcategories" value="<%= subcategory.name %>" class="rounded-full px-2 py-1 bg-transparent" >
                                <input type="hidden" id="subcategoriesId" value="<%= subcategory._id %>" >
                                <input type="hidden" id="delete" value="false" >
                                <span class="subcategory-count"><%= subcategory.products.length %></span>
                                <button type="button" class="remove-subcategory-btn bg-white hover:bg-red-400 hover:text-white px-2 py-1 flex justify-center items-center rounded-full" data-id="<%= subcategory._id %>">
                                    <i class="ri-delete-bin-line"></i>
                                </button>
                            </div>
                        <% }) %>
                    </div>
                </div>
                <% } %>
        
                <input type="hidden" id="categoryId" value="<%= category._id %>">
            </div>
        
            <button type="submit" class="submit-btn px-[24px] py-[12px] rounded-[58px] cursor-pointer bg-blue-600 text-white">Add Category</button>
        
        </form>
        
        
    </div>

    <footer class="h-[50px] absolute bottom-0 left-0 w-full dark:bg-[#1E293B] bg-white flex justify-center items-center">
        <p class="text-center text-zinc-600">Design with <span class="heart text-red-600"><i class="ri-heart-line"></i></span> by <a class="hover:text-red-600 text-blue-600" href="https://www.linkedin.com/in/aakash6250">Aakash Patel</a> All rights reserved.</p>
    </footer>
</main>

<%- include('../partials/footer') %>
