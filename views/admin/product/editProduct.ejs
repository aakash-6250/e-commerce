<%- include('../partials/header') %>

<%- include('../partials/sidebar') %>

<main class="relative bg-[#F2F7FB] dark:bg-[#0F172A] w-full pb-[50px]">
    <%- include('../partials/navbar') %>
    
    <div class="container w-full px-6 py-8 flex flex-col gap-[30px] m-auto">
        <h1 class="font-[merriweather] text-2xl font-bold">Add Single Product</h1>
        
        <form id="edit-product-form" class="bg-white dark:bg-[#1E293B] rounded-2xl w-full min-w-[300px] p-5 flex flex-col gap-[20px] justify-center items-center">

            <div class="w-full flex gap-4 flex-wrap">
        
                <div class="name-label-input w-full">
                    <label for="name" class="text-lg font-bold dark:text-[#94A3B8]">Product Name : </label>

                    <input type="text" name="name" id="name" placeholder="Product Name" class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600" value="<%= product.name %>" >
                </div>
        
                <div class="description-label-input w-full">
                    <label for="description" class="text-lg font-bold dark:text-[#94A3B8]">Product Description : </label>
        
                    <textarea name="description" id="description" placeholder="Product Description"  class="mt-1 p-2 block w-full h-[200px] rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600"><%= product.description.join('\n') %></textarea>
                </div>
        
                <div class="original-price-label-input w-full">
                    <label for="price" class="text-lg font-bold dark:text-[#94A3B8]">Product Original Price : </label>
        
                    <input type="text" name="price" id="price" placeholder="Product Original Price" value="<%= product.price %>" class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600" >
                </div>

                <div class="discounted-price-label-input w-full">
                    <label for="discounted-price" class="text-lg font-bold dark:text-[#94A3B8]">Product Discounted Price : </label>
        
                    <input type="text" name="discountedPrice" id="discounted-price" placeholder="Product Discounted Price" value="<%= product.discountedPrice %>" class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600" >
                </div>
        
                <div class="category-label-input w-full">
                    <label for="category" class="text-lg font-bold dark:text-[#94A3B8]">Product Category : </label>
        
                    <select name="category" id="category" class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600">
                        <% if(categories.length > 0) { %>
                            <option value="" disabled selected><%= product.category.name %></option>
                            <% categories.forEach(category => { %>
                                <option value="<%= category._id %>"><%= category.name %></option>
                            <% }) %>
                        <% } else { %>
                            <option value="" disabled selected>No category found first create category</option>
                        <% } %>
                    </select>
                </div>

                <div class="subcategory-label-input w-full">
                    <label for="subcategory" class="text-lg font-bold dark:text-[#94A3B8]">Product Subcategory : </label>
        
                    <select name="subcategory" id="subcategory"  class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600">
                        <option value="" disabled selected><%= product.subcategory.name %></option>
                    </select>
                </div>
        
                <div class="stock-label-input w-full">
                    <label for="stock" class="text-lg font-bold dark:text-[#94A3B8]">Product Quantity : </label>
        
                    <input type="text" name="stock" id="stock" value="<%= product.stock %>"  placeholder="Product Quantity" class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600" >
                </div>

                <div class="brand-label-input w-full">
                    <label for="brand" class="text-lg font-bold dark:text-[#94A3B8]">Product Brand : </label>
        
                    <input type="text" name="brand" id="brand" value="<%= product.brand %>"  placeholder="Product Brand" class="mt-1 p-2 block w-full rounded-[10px] border-gray-300 border-[1px] outline-none dark:bg-[#202D3F] dark:border-gray-600" >
                </div>
        
                <div class="upload-images-label-input w-full">
                    <label for="images" class="border-dashed border-[1px] border-blue-600 rounded-xl w-full cursor-pointer flex flex-col justify-center items-center gap-[5px] p-3">
                        <i class="ri-upload-cloud-2-line text-5xl"></i>
                        <p class="file-label text-lg text-zinc-400 text-center">Drag and drop product images here or <span class="text-blue-600">browse</span> ( max 5 images )</p>
                    </label>
        
                    <input type="file" name="images" id="images" multiple  class="hidden">
                    
                    <div id="images-preview-container" class="mt-3 w-full flex justify-center gap-3 flex-wrap">
                    
                    </div>
                </div>

                <% if(product.images.length > 0) { %>
                    <div class="product-images w-full flex justify-center gap-3 p-3 flex-wrap items-center">
                        <% product.images.forEach(image => { %>
                            <div class="relative w-[100px] h-[100px] rounded-[10px] overflow-hidden">
                                <img src="/images/product/<%= image %>" alt="product-image" class="w-full h-full object-cover">
                                <button type="button" class="absolute top-0 right-0 bg-red-600 text-white p-1 rounded-bl-[10px] rounded-tr-[10px] delete-image-btn" data-image="<%= image %>">
                                    <i class="ri-delete-bin-line"></i>
                                </button>
                            </div>
                        <% }) %>
                    </div>
                <% } %>

                <div class="trending-label-input flex items-center w-max gap-5 border-gray-300 border-[1px] dark:border-gray-600 rounded-[10px] mt-1 p-2 px-4 ">
                    
                    <input type="checkbox" name="trending" id="trending" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600  cursor-pointer" <% if(product.trending){ %> checked <% } %> >

                    <label for="trending" class="text-lg font-bold dark:text-[#94A3B8] cursor-pointer">Trending</label>

                </div>

                <div class="featured-label-input flex items-center w-max gap-5 border-gray-300 border-[1px] dark:border-gray-600 rounded-[10px] mt-1 p-2 px-4 ">
                    
                    <input type="checkbox" name="featured" id="featured" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600  cursor-pointer" <% if(product.featured){ %> checked <% } %> >

                    <label for="featured" class="text-lg font-bold dark:text-[#94A3B8] cursor-pointer">Featured</label>

                </div>


                <div class="published-label-input flex items-center w-max gap-5 border-gray-300 border-[1px] dark:border-gray-600 rounded-[10px] mt-1 p-2 px-4">
                    
                    <input type="checkbox" name="published" id="published" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer" <% if(product.published){ %> checked <% } %>>

                    <label for="published" class="text-lg font-bold dark:text-[#94A3B8] cursor-pointer">Publish</label>

                </div>

                <input type="hidden" id="productId" value="<%= product._id %>">

        
            </div>
        
            <button type="submit" id="submitBtn" class="submit-btn px-[24px] py-[12px] rounded-[58px] bg-blue-600 text-white ">Update Product</button>

        </form>
        
    </div>

    <footer class="h-[50px] absolute bottom-0 left-0 w-full dark:bg-[#1E293B] bg-white flex justify-center items-center">
        <p class="text-center text-zinc-600">Design with <span class="heart text-red-600"><i class="ri-heart-line"></i></span> by <a class="hover:text-red-600 text-blue-600" href="https://www.linkedin.com/in/aakash6250">Aakash Patel</a> All rights reserved.</p>
    </footer>
</main>

<%- include('../partials/footer') %>
